<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Harry Yau">
<meta name="dcterms.date" content="2026-01-16">

<title>Winning the Numbers Game: The Data Revolution in Modern Volleyball – 542_blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">542_blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Harry Yau</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/yauchungki1305"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Winning the Numbers Game: The Data Revolution in Modern Volleyball</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Harry Yau </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 16, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="data-revolution-on-the-volleyball-court" class="level1">
<h1>Data Revolution on the volleyball court</h1>
<p>For decades, the sound of a volleyball match was defined by the screech of sneakers on wood and the rhythmic “boom” of a ball being spiked. Success is an attributed to the “eye” of a traditional coach, the raw athleticism of a leap, and ability of taking hard training as daily mission. But look closer at the sidelines of a professional or Olympic match today, and you will see a new player in the rotation: the data scientist.</p>
<p>Volleyball is no longer a sport only dominated by people with the best physical gift. We have entered an era where information is as critical as physical power. By contributing data science into volleyball, teams are moving away from the fallibility of human memory and intuition toward a more objective, evidence-based approach to coaching, player development, and tactical execution. More and more potential players are now being introduce to the world.</p>
</section>
<section id="the-digital-footprint-of-the-match" class="level1">
<h1>The Digital footprint of the Match</h1>
<p>Every match, set, and even individual rally produces an incredible amount of information. In the past, this was captured by a scout with a clipboard physically. Today, sophisticated software and wearable sensors capture the digital data of every movement.</p>
<p>These are tools that widely use in Volleyball:</p>
<ul>
<li><p><strong>DataVolley</strong>: For scouting in volleyball, allow to create a searchable database of every match</p></li>
<li><p><strong>Catapult</strong>: sensors for capturing physical data of players.</p></li>
<li><p><strong>Dartfish</strong>: Analysis video and provide frame-by-frame biomechanical breakdowns</p></li>
<li><p><strong>Tableau</strong>: used by data analysts to create “Heat Maps” and “Chemistry Dashboards”.</p></li>
</ul>
<section id="fundamental-skill-statistics" class="level2">
<h2 class="anchored" data-anchor-id="fundamental-skill-statistics">Fundamental Skill Statistics</h2>
<p>At the most basic level, data science captures the technique statistic of the game. Every serve, spike, block, and pass is digitized. However, data science goes beyond simple counting. It looks at these actions and provide analysis. For example, it’s not just about how many spikes a player made, but their “kill percentage” relative to the quality of the set they received and the specific defensive formation they faced.</p>
</section>
<section id="fitness-and-bio-metric-data" class="level2">
<h2 class="anchored" data-anchor-id="fitness-and-bio-metric-data">Fitness and Bio-Metric Data</h2>
<p>Beyond the skills themselves, the “engine” of the player is constantly monitored. Modern players often wear health stats trackers or inertial measurement units (IMUs) that track:</p>
<ul>
<li><p><strong>Jump Height and Frequency</strong>: The count of a player jumped and the average height of those leaps.</p></li>
<li><p><strong>Power Output</strong>: The explosive force generated during a serve.</p></li>
<li><p><strong>Stamina and Recovery</strong>: How quickly a player’s heart rate returns to baseline during a timeout or between sets.</p></li>
</ul>
<p>By replacing subjective opinions with these metrics, coaches can identify patterns that were previously invisible. Data might reveal that a star hitter’s efficiency drops by 15% after their 30th jump, or that a specific rotation performs significantly better against left-handed opponents.</p>
</section>
</section>
<section id="individual-developement-tailor-made-training" class="level1">
<h1>Individual Developement: Tailor Made Training</h1>
<p>The “one-size-fits-all” approach to training is no longer the best. Data science allows for a level of personalization that ensures every minute spent in the gym is optimized for maximum return on investment.</p>
<section id="strengths-and-weaknesses-under-the-microscope" class="level2">
<h2 class="anchored" data-anchor-id="strengths-and-weaknesses-under-the-microscope">Strengths and Weaknesses Under the Microscope</h2>
<p>By tracking data over a long period, analysts can create a comprehensive profile of a player’s technical evolution. Perhaps A player is outstanding at attacking in the front row but struggles when forced to transition into a defensive play in back row. Without data, a coach might simply feel the player is “having an off day.” With data, the coach can see a statistical pattern.</p>
</section>
<section id="tailor-made-training-cycle" class="level2">
<h2 class="anchored" data-anchor-id="tailor-made-training-cycle">Tailor-Made Training Cycle</h2>
<p>This insight allows for the creation of personalized training plans. If the data shows a player’s vertical leap is decreasing late in matches, their program will shift toward localized muscular endurance and explosive weight training. If their serve-receive passing is statistically weak against high-velocity “float” serves, their skill practice will be more focus on the specific technical skills. This makes improvement not just faster, but also permanent to players.</p>
</section>
</section>
<section id="better-health-better-power-injury-prevention-and-longevity" class="level1">
<h1>Better Health, Better Power: Injury Prevention and Longevity</h1>
<p>In volleyball, the greatest enemy is not only the opponent across the net; also the cumulative toll of the sport on the human body. Volleyball is a high risk sport, repetitive jumping, violent overhead swings, and rapid lateral movements make injuries—particularly to the knees, ankles, and shoulders—commonplace.</p>
<section id="stop-overloading" class="level2">
<h2 class="anchored" data-anchor-id="stop-overloading">Stop Overloading</h2>
<p>One of the most revolutionary aspects of data science in volleyball is Workload Management. By calculating the Acute:Chronic Workload Ratio (ACWR), teams can identify when a player is entering a “danger zone” for injury. If a player’s training load in the current week is significantly higher than their average over the last month, the data flags them for a “deload” period and decrease the load of training. Increasing recovery time based on data rather than waiting for a player to subjective feeling. This can prevent catastrophic ligament tears or stress fractures.</p>
</section>
<section id="ergonomic-adjustments" class="level2">
<h2 class="anchored" data-anchor-id="ergonomic-adjustments">Ergonomic Adjustments</h2>
<p>Motion capture technology allows trainers to analyze a player’s biomechanics in 3D. If a player is landing in a way that puts excessive stress on their cross-tenden, or if their arm swing is creating a shoulder impingement, the data provides the reasons. Trainers can then adjust the player’s ergonomics, changing their landing posture or their swing path to reduce physical stress. This doesn’t just keep players on the court; it extends their competitive careers by years.</p>
</section>
</section>
<section id="superior-chess-gambit-better-decision-making-at-the-team-level" class="level1">
<h1>Superior Chess Gambit: Better Decision-Making at the Team Level</h1>
<p>On the court, volleyball is a game of fast rotations and tactical shifts. Data science has turned the bench into a command center where every substitution and tactical change is supported by probability.</p>
<section id="the-chemistry" class="level2">
<h2 class="anchored" data-anchor-id="the-chemistry">The Chemistry</h2>
<p>We often talk about “team chemistry,” but data science allows us to quantify it. Analysts can evaluate different lineups to see which combination of six players has the highest percentage to run a better play. They might discover that two players who aren’t the strongest individually have a better chemistry that makes the team’s defense nearly impenetrable when they are on the court together.</p>
</section>
<section id="tactical-scouting-and-in-game-adjustments" class="level2">
<h2 class="anchored" data-anchor-id="tactical-scouting-and-in-game-adjustments">Tactical Scouting and In-Game Adjustments</h2>
<p>Before a match even begins, data science provides a blueprint of the opponent. Coaches know exactly where an opposing setter is most likely to dump the ball on a “perfect” pass versus an “out-of-system” play. During the game, coaches use tablets to track real-time statistics, allowing them to make adjustments, shifting the defensive line two feet to the left—based on the current hitting patterns of the opponent.</p>
</section>
</section>
<section id="the-human-element-in-a-data-driven-world" class="level1">
<h1>The Human Element in a Data-Driven World</h1>
<p>A common fear is that using AI tools or Data Science will remove the soul of the sport or replace the intuition of legendary coaches. However, the reality is the opposite. Data science is not a replacement for the coach; it is a superpower for the coach.</p>
<p>It clears away the “noise” of a loud stadium and the bias of a recent win or loss, allowing the coach to see the actual performance of their team in terms of numbers. It allows players to understand their bodies and their craft with a level of clarity that was impossible 20 years ago.</p>
<section id="conclusion-unlock-the-full-potential" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-unlock-the-full-potential">Conclusion: Unlock the Full Potential</h2>
<p>The rise of data science in volleyball represents the professionalization of every second spent on the court. By turning abstract performance into clear, actionable insights, players and teams are training smarter rather than just harder. They are reducing the “luck” factor by preparing for every eventuality and protecting their most valuable assets, the players, through scientific monitoring.</p>
<p>As technology continues to evolve—with AI-powered predictive modeling and more advanced wearables, the role of data will only grow. In the modern game, the teams that reach their full potential won’t just be the ones with the tallest players or the hardest hitters; they will be the ones who best understand the numbers behind the game.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>